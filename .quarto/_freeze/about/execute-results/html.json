{
  "hash": "7cbb26e9fca01f41624817f716103409",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"\"\nmessage: false\nwarning: false\n---\n\n# Packages\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(gsheet)\nlibrary(dplyr)\nlibrary(tidyverse)\n```\n:::\n\n\n# Data importation\n\n::: {.cell}\n\n```{.r .cell-code}\nsad = gsheet2tbl(\"https://docs.google.com/spreadsheets/d/1hLxH3CzhtBC1InN_rmTmll96m5z4U1SsWytDi2FDuIc/edit?usp=sharing\")\n\nsad$real = as.numeric(sad$real)\n```\n:::\n\n\n# Filtering\n\n::: {.cell}\n\n```{.r .cell-code}\nsad2 = sad %>% \n  filter(!rater %in% c(\"10\",\"3\",\"31\",\"33\",\n                     \"34\", \"36\",\"24\", \n                    '20',\"15\", \"38\"))\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsad2 %>% \n  filter(!real > 86) %>% \n  summarise(\n    max = max(real)\n  )\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"max\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"82.5\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n# Raters estimation\n\n::: {.cell}\n\n```{.r .cell-code}\nsad2 %>% \n  filter(!is.na(rater)) %>% \n  ggplot(aes(x = real, y = new)) +\n  geom_point() +\n  facet_wrap(~ rater, ncol = 5) +\n  scale_x_continuous(\n    limits = c(0, 100),\n    breaks = seq(0, 100, 10),\n    oob = scales::squish,    # em vez de descartar >100, “corta” em 100\n    expand = c(0, 0)\n  ) +\n  scale_y_continuous(\n    limits = c(0, 100),\n    breaks = seq(0, 100, 10),\n    oob = scales::squish,\n    expand = c(0, 0)\n  )+\n  geom_abline(slope = 1, intercept = 0, color = \"red\", linetype = \"solid\")\n```\n\n::: {.cell-output-display}\n![](about_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsad2 = sad2 %>% \n  filter(!is.na(rater))\n```\n:::\n\n\n# CCC's Lin\n\n## With SAD\n\n::: {.cell}\n\n```{.r .cell-code}\nccc <- epiR :: epi.ccc(sad2$real,sad2$new)\nccc.result <- ccc $ rho.c \nccc.result \n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"est\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"lower\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"upper\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"0.9183241\",\"2\":\"0.9089817\",\"3\":\"0.9267444\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nCb <- ccc$C.b\nCb\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.985616\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nr <- ccc$rho.c[,1]/ccc$C.b\nr\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.9317261\n```\n\n\n:::\n:::\n\n\n## Without SAD\n\n::: {.cell}\n\n```{.r .cell-code}\nccc <- epiR :: epi.ccc(sad2$real,sad2$unaided)\nccc.result <- ccc $ rho.c \nccc.result \n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"est\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"lower\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"upper\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"0.8373728\",\"2\":\"0.819344\",\"3\":\"0.8537471\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nCb <- ccc$C.b\nCb\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.9866801\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nr <- ccc$rho.c[,1]/ccc$C.b\nr\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.8486771\n```\n\n\n:::\n:::\n\n\n## By raters\n\n::: {.cell}\n\n```{.r .cell-code}\nsad_long <- sad2 %>%\n  group_by(position, rater) %>%\n  mutate(\n    error_unaided = real - unaided,\n    error_new     = real - new\n  ) %>%\n  ungroup() %>%\n  pivot_longer(\n    cols = starts_with(\"error_\"),\n    names_to = \"SAD_type\",\n    values_to = \"error\"\n  ) %>%\n  mutate(\n    SAD_type = case_when(\n      SAD_type == \"error_unaided\" ~ \"unaided\",\n      SAD_type == \"error_new\"     ~ \"new\"\n    )\n  )\n\n\nsad_long2 <- sad_long %>%\n  pivot_longer(\n    cols = c(unaided, new),   \n    names_to = \"method\",       \n    values_to = \"estimated\"        \n  ) %>%\n  select(rater, position, real, method, estimated)\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(DescTools)\n\n\nstats_data = sad_long2 %>% \n  group_by(method, rater) %>% \n  summarise(ccc = CCC(estimated, real)$rho.c$est,\n            r = cor(estimated, real),\n            cb = CCC(estimated, real)$C.b,\n            ccc_lower = CCC(estimated, real)$rho.c$lwr.ci,\n            ccc_upper = CCC(estimated, real)$rho.c$upr.ci,\n            s.shift = CCC(estimated, real)$s.shift,\n            l.shift = CCC(estimated, real)$l.shift)\nstats_data\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"method\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"rater\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"ccc\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"r\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"cb\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"ccc_lower\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"ccc_upper\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"s.shift\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"l.shift\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"new\",\"2\":\"1\",\"3\":\"0.9259534\",\"4\":\"0.9422392\",\"5\":\"0.9827158\",\"6\":\"0.8886411\",\"7\":\"0.9510875\",\"8\":\"1.0701716\",\"9\":\"0.17485760\"},{\"1\":\"new\",\"2\":\"2\",\"3\":\"0.9132636\",\"4\":\"0.9438984\",\"5\":\"0.9675443\",\"6\":\"0.8714146\",\"7\":\"0.9419152\",\"8\":\"1.0694892\",\"9\":\"0.25014747\"},{\"1\":\"new\",\"2\":\"4\",\"3\":\"0.9434668\",\"4\":\"0.9531513\",\"5\":\"0.9898394\",\"6\":\"0.9152887\",\"7\":\"0.9624555\",\"8\":\"1.1105668\",\"9\":\"0.09757992\"},{\"1\":\"new\",\"2\":\"5\",\"3\":\"0.9305803\",\"4\":\"0.9778269\",\"5\":\"0.9516820\",\"6\":\"0.9012179\",\"7\":\"0.9514379\",\"8\":\"1.1236794\",\"9\":\"-0.29652871\"},{\"1\":\"new\",\"2\":\"6\",\"3\":\"0.8594015\",\"4\":\"0.9202247\",\"5\":\"0.9339040\",\"6\":\"0.7973192\",\"7\":\"0.9034888\",\"8\":\"1.0722621\",\"9\":\"0.36969962\"},{\"1\":\"new\",\"2\":\"7\",\"3\":\"0.9230543\",\"4\":\"0.9394496\",\"5\":\"0.9825479\",\"6\":\"0.8843454\",\"7\":\"0.9491571\",\"8\":\"1.0717704\",\"9\":\"0.17526581\"},{\"1\":\"new\",\"2\":\"8\",\"3\":\"0.9095612\",\"4\":\"0.9438390\",\"5\":\"0.9636826\",\"6\":\"0.8698785\",\"7\":\"0.9375462\",\"8\":\"1.2133641\",\"9\":\"0.19455876\"},{\"1\":\"new\",\"2\":\"9\",\"3\":\"0.8968329\",\"4\":\"0.9220544\",\"5\":\"0.9726464\",\"6\":\"0.8491875\",\"7\":\"0.9299958\",\"8\":\"1.1840727\",\"9\":\"0.16622358\"},{\"1\":\"new\",\"2\":\"11\",\"3\":\"0.9537174\",\"4\":\"0.9597531\",\"5\":\"0.9937112\",\"6\":\"0.9294913\",\"7\":\"0.9697501\",\"8\":\"1.0576818\",\"9\":\"0.09752664\"},{\"1\":\"new\",\"2\":\"12\",\"3\":\"0.9103384\",\"4\":\"0.9362654\",\"5\":\"0.9723081\",\"6\":\"0.8688102\",\"7\":\"0.9391489\",\"8\":\"1.1730880\",\"9\":\"0.17726313\"},{\"1\":\"new\",\"2\":\"13\",\"3\":\"0.8691334\",\"4\":\"0.9316957\",\"5\":\"0.9328511\",\"6\":\"0.8143784\",\"7\":\"0.9085508\",\"8\":\"1.2215160\",\"9\":\"0.32217064\"},{\"1\":\"new\",\"2\":\"14\",\"3\":\"0.9301793\",\"4\":\"0.9599819\",\"5\":\"0.9689551\",\"6\":\"0.8977256\",\"7\":\"0.9525920\",\"8\":\"1.1324165\",\"9\":\"0.22044364\"},{\"1\":\"new\",\"2\":\"16\",\"3\":\"0.9389595\",\"4\":\"0.9438978\",\"5\":\"0.9947682\",\"6\":\"0.9072913\",\"7\":\"0.9600368\",\"8\":\"1.0680856\",\"9\":\"0.07860365\"},{\"1\":\"new\",\"2\":\"17\",\"3\":\"0.8347663\",\"4\":\"0.9254163\",\"5\":\"0.9020441\",\"6\":\"0.7705927\",\"7\":\"0.8821828\",\"8\":\"1.2619825\",\"9\":\"0.40348483\"},{\"1\":\"new\",\"2\":\"18\",\"3\":\"0.8448008\",\"4\":\"0.9332248\",\"5\":\"0.9052490\",\"6\":\"0.7876510\",\"7\":\"0.8875374\",\"8\":\"1.3572050\",\"9\":\"0.33959330\"},{\"1\":\"new\",\"2\":\"19\",\"3\":\"0.9436427\",\"4\":\"0.9462075\",\"5\":\"0.9972893\",\"6\":\"0.9136229\",\"7\":\"0.9634287\",\"8\":\"1.0082921\",\"9\":\"-0.07326592\"},{\"1\":\"new\",\"2\":\"21\",\"3\":\"0.9291300\",\"4\":\"0.9420474\",\"5\":\"0.9862879\",\"6\":\"0.8937882\",\"7\":\"0.9530037\",\"8\":\"1.1051379\",\"9\":\"0.13342820\"},{\"1\":\"new\",\"2\":\"22\",\"3\":\"0.9289353\",\"4\":\"0.9563597\",\"5\":\"0.9713242\",\"6\":\"0.8951341\",\"7\":\"0.9521167\",\"8\":\"1.1133293\",\"9\":\"0.21796482\"},{\"1\":\"new\",\"2\":\"23\",\"3\":\"0.9691760\",\"4\":\"0.9780620\",\"5\":\"0.9909147\",\"6\":\"0.9534325\",\"7\":\"0.9796523\",\"8\":\"1.0662624\",\"9\":\"0.11924483\"},{\"1\":\"new\",\"2\":\"25\",\"3\":\"0.8678088\",\"4\":\"0.9184826\",\"5\":\"0.9448288\",\"6\":\"0.8086894\",\"7\":\"0.9095723\",\"8\":\"1.1366705\",\"9\":\"0.31678484\"},{\"1\":\"new\",\"2\":\"26\",\"3\":\"0.9673233\",\"4\":\"0.9709335\",\"5\":\"0.9962817\",\"6\":\"0.9500303\",\"7\":\"0.9786971\",\"8\":\"1.0517691\",\"9\":\"0.07011651\"},{\"1\":\"new\",\"2\":\"27\",\"3\":\"0.9485169\",\"4\":\"0.9575869\",\"5\":\"0.9905283\",\"6\":\"0.9217843\",\"7\":\"0.9662732\",\"8\":\"1.0565471\",\"9\":\"0.12687832\"},{\"1\":\"new\",\"2\":\"28\",\"3\":\"0.9593638\",\"4\":\"0.9594343\",\"5\":\"0.9999265\",\"6\":\"0.9373803\",\"7\":\"0.9737343\",\"8\":\"0.9933720\",\"9\":\"0.01013936\"},{\"1\":\"new\",\"2\":\"29\",\"3\":\"0.9213086\",\"4\":\"0.9597075\",\"5\":\"0.9599890\",\"6\":\"0.8862528\",\"7\":\"0.9458706\",\"8\":\"1.1612992\",\"9\":\"0.24688744\"},{\"1\":\"new\",\"2\":\"30\",\"3\":\"0.8742154\",\"4\":\"0.9536830\",\"5\":\"0.9166730\",\"6\":\"0.8250500\",\"7\":\"0.9102436\",\"8\":\"1.2412755\",\"9\":\"0.36729386\"},{\"1\":\"new\",\"2\":\"32\",\"3\":\"0.9340139\",\"4\":\"0.9384526\",\"5\":\"0.9952702\",\"6\":\"0.8996682\",\"7\":\"0.9568692\",\"8\":\"1.0584036\",\"9\":\"0.07925823\"},{\"1\":\"new\",\"2\":\"35\",\"3\":\"0.9186581\",\"4\":\"0.9541608\",\"5\":\"0.9627917\",\"6\":\"0.8801395\",\"7\":\"0.9451593\",\"8\":\"0.9418192\",\"9\":\"-0.27147466\"},{\"1\":\"new\",\"2\":\"37\",\"3\":\"0.9399447\",\"4\":\"0.9607982\",\"5\":\"0.9782957\",\"6\":\"0.9098892\",\"7\":\"0.9601846\",\"8\":\"1.0414038\",\"9\":\"0.20670138\"},{\"1\":\"unaided\",\"2\":\"1\",\"3\":\"0.8974447\",\"4\":\"0.9155250\",\"5\":\"0.9802514\",\"6\":\"0.8462695\",\"7\":\"0.9322097\",\"8\":\"0.9567205\",\"9\":\"-0.19579322\"},{\"1\":\"unaided\",\"2\":\"2\",\"3\":\"0.9348010\",\"4\":\"0.9528884\",\"5\":\"0.9810183\",\"6\":\"0.9021818\",\"7\":\"0.9567898\",\"8\":\"0.9295709\",\"9\":\"-0.18265241\"},{\"1\":\"unaided\",\"2\":\"4\",\"3\":\"0.8007869\",\"4\":\"0.9235340\",\"5\":\"0.8670898\",\"6\":\"0.7261871\",\"7\":\"0.8567488\",\"8\":\"0.9660958\",\"9\":\"-0.55260871\"},{\"1\":\"unaided\",\"2\":\"5\",\"3\":\"0.6759359\",\"4\":\"0.8818097\",\"5\":\"0.7665326\",\"6\":\"0.5773935\",\"7\":\"0.7550683\",\"8\":\"1.0594031\",\"9\":\"-0.77834500\"},{\"1\":\"unaided\",\"2\":\"6\",\"3\":\"0.7293584\",\"4\":\"0.8903598\",\"5\":\"0.8191726\",\"6\":\"0.6372533\",\"7\":\"0.8009207\",\"8\":\"1.0268142\",\"9\":\"-0.66391844\"},{\"1\":\"unaided\",\"2\":\"7\",\"3\":\"0.8938939\",\"4\":\"0.9214870\",\"5\":\"0.9700560\",\"6\":\"0.8419593\",\"7\":\"0.9294160\",\"8\":\"1.0098016\",\"9\":\"0.24827722\"},{\"1\":\"unaided\",\"2\":\"8\",\"3\":\"0.8922544\",\"4\":\"0.9257173\",\"5\":\"0.9638519\",\"6\":\"0.8406816\",\"7\":\"0.9277875\",\"8\":\"0.9408443\",\"9\":\"-0.26699861\"},{\"1\":\"unaided\",\"2\":\"9\",\"3\":\"0.3618285\",\"4\":\"0.9154354\",\"5\":\"0.3952528\",\"6\":\"0.2880542\",\"7\":\"0.4313331\",\"8\":\"3.0378921\",\"9\":\"1.30114734\"},{\"1\":\"unaided\",\"2\":\"11\",\"3\":\"0.9327023\",\"4\":\"0.9337118\",\"5\":\"0.9989188\",\"6\":\"0.8970786\",\"7\":\"0.9562799\",\"8\":\"1.0023420\",\"9\":\"-0.04646809\"},{\"1\":\"unaided\",\"2\":\"12\",\"3\":\"0.8945687\",\"4\":\"0.9357705\",\"5\":\"0.9559701\",\"6\":\"0.8457988\",\"7\":\"0.9285113\",\"8\":\"0.9028287\",\"9\":\"-0.28575688\"},{\"1\":\"unaided\",\"2\":\"13\",\"3\":\"0.9145537\",\"4\":\"0.9260939\",\"5\":\"0.9875388\",\"6\":\"0.8713947\",\"7\":\"0.9436648\",\"8\":\"1.0783774\",\"9\":\"0.13978640\"},{\"1\":\"unaided\",\"2\":\"14\",\"3\":\"0.9027065\",\"4\":\"0.9087368\",\"5\":\"0.9933641\",\"6\":\"0.8540684\",\"7\":\"0.9356960\",\"8\":\"0.9052912\",\"9\":\"0.05875688\"},{\"1\":\"unaided\",\"2\":\"16\",\"3\":\"0.6861111\",\"4\":\"0.8439727\",\"5\":\"0.8129541\",\"6\":\"0.5807575\",\"7\":\"0.7688609\",\"8\":\"0.9634588\",\"9\":\"-0.67733123\"},{\"1\":\"unaided\",\"2\":\"17\",\"3\":\"0.8300165\",\"4\":\"0.9101810\",\"5\":\"0.9119246\",\"6\":\"0.7603346\",\"7\":\"0.8808103\",\"8\":\"1.1828268\",\"9\":\"0.40608456\"},{\"1\":\"unaided\",\"2\":\"18\",\"3\":\"0.9544100\",\"4\":\"0.9568245\",\"5\":\"0.9974765\",\"6\":\"0.9299207\",\"7\":\"0.9704724\",\"8\":\"1.0078518\",\"9\":\"0.07070116\"},{\"1\":\"unaided\",\"2\":\"19\",\"3\":\"0.7255142\",\"4\":\"0.8917346\",\"5\":\"0.8135988\",\"6\":\"0.6332649\",\"7\":\"0.7974368\",\"8\":\"1.0311711\",\"9\":\"-0.67621877\"},{\"1\":\"unaided\",\"2\":\"21\",\"3\":\"0.9242345\",\"4\":\"0.9290003\",\"5\":\"0.9948700\",\"6\":\"0.8846364\",\"7\":\"0.9505970\",\"8\":\"0.9819472\",\"9\":\"0.09990526\"},{\"1\":\"unaided\",\"2\":\"22\",\"3\":\"0.8890308\",\"4\":\"0.9278410\",\"5\":\"0.9581715\",\"6\":\"0.8366688\",\"7\":\"0.9252890\",\"8\":\"1.0576025\",\"9\":\"0.29012351\"},{\"1\":\"unaided\",\"2\":\"23\",\"3\":\"0.9355935\",\"4\":\"0.9483707\",\"5\":\"0.9865272\",\"6\":\"0.9033831\",\"7\":\"0.9573063\",\"8\":\"1.1011883\",\"9\":\"0.13422146\"},{\"1\":\"unaided\",\"2\":\"25\",\"3\":\"0.8601879\",\"4\":\"0.9140905\",\"5\":\"0.9410314\",\"6\":\"0.7973153\",\"7\":\"0.9045927\",\"8\":\"0.9299241\",\"9\":\"-0.34647794\"},{\"1\":\"unaided\",\"2\":\"26\",\"3\":\"0.8461796\",\"4\":\"0.9394601\",\"5\":\"0.9007084\",\"6\":\"0.7861175\",\"7\":\"0.8904100\",\"8\":\"0.8295804\",\"9\":\"-0.43065694\"},{\"1\":\"unaided\",\"2\":\"27\",\"3\":\"0.8621260\",\"4\":\"0.9291983\",\"5\":\"0.9278170\",\"6\":\"0.8020844\",\"7\":\"0.9049139\",\"8\":\"0.9863894\",\"9\":\"-0.39422027\"},{\"1\":\"unaided\",\"2\":\"28\",\"3\":\"0.7968833\",\"4\":\"0.8232961\",\"5\":\"0.9679182\",\"6\":\"0.7056559\",\"7\":\"0.8621218\",\"8\":\"0.8674757\",\"9\":\"-0.21457989\"},{\"1\":\"unaided\",\"2\":\"29\",\"3\":\"0.9072006\",\"4\":\"0.9312273\",\"5\":\"0.9741988\",\"6\":\"0.8617353\",\"7\":\"0.9382118\",\"8\":\"0.9252111\",\"9\":\"-0.21661837\"},{\"1\":\"unaided\",\"2\":\"30\",\"3\":\"0.9303263\",\"4\":\"0.9593963\",\"5\":\"0.9696996\",\"6\":\"0.8975653\",\"7\":\"0.9528697\",\"8\":\"1.1191712\",\"9\":\"0.22316993\"},{\"1\":\"unaided\",\"2\":\"32\",\"3\":\"0.9417084\",\"4\":\"0.9525906\",\"5\":\"0.9885762\",\"6\":\"0.9121598\",\"7\":\"0.9615172\",\"8\":\"0.9194004\",\"9\":\"0.12667189\"},{\"1\":\"unaided\",\"2\":\"35\",\"3\":\"0.6898141\",\"4\":\"0.8526771\",\"5\":\"0.8089981\",\"6\":\"0.5875210\",\"7\":\"0.7704079\",\"8\":\"0.8316069\",\"9\":\"-0.66188799\"},{\"1\":\"unaided\",\"2\":\"37\",\"3\":\"0.9151023\",\"4\":\"0.9184286\",\"5\":\"0.9963783\",\"6\":\"0.8713427\",\"7\":\"0.9444202\",\"8\":\"0.9456596\",\"9\":\"0.06439922\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n# Intraclass Correlation Coefficient\n\n## With SAD\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsad3 = sad2 %>%\n  dplyr::select(real,rater,new) %>% \n  filter(!is.na(new))\n\n\nsad2_wide <- sad3 %>%\n  pivot_wider(\n    id_cols = c(real),\n    names_from = rater,\n    values_from = new\n  )\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(epiR)\n\nepi.occc(sad2_wide, na.rm = FALSE, pairs = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nOverall CCC           0.9120\nOverall precision     0.9442\nOverall accuracy      0.9659\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(psych)\n\nic = ICC(sad2_wide)\nknitr::kable(ic$results[1:2])\n```\n\n::: {.cell-output-display}\n\n\n|                        |type  |       ICC|\n|:-----------------------|:-----|---------:|\n|Single_raters_absolute  |ICC1  | 0.9133245|\n|Single_random_raters    |ICC2  | 0.9134044|\n|Single_fixed_raters     |ICC3  | 0.9384759|\n|Average_raters_absolute |ICC1k | 0.9967382|\n|Average_random_raters   |ICC2k | 0.9967415|\n|Average_fixed_raters    |ICC3k | 0.9977445|\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(irr)\n\nicc(sad2_wide, \"oneway\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n Single Score Intraclass Correlation\n\n   Model: oneway \n   Type : consistency \n\n   Subjects = 40 \n     Raters = 29 \n     ICC(1) = 0.913\n\n F-Test, H0: r0 = 0 ; H1: r0 > 0 \n F(39,1120) = 307 , p = 0 \n\n 95%-Confidence Interval for ICC Population Values:\n  0.875 < ICC < 0.946\n```\n\n\n:::\n:::\n\n\n## Without SAD\n\n::: {.cell}\n\n```{.r .cell-code}\nsad3 = sad2 %>%\n  dplyr::select(real,rater,unaided) %>% \n  filter(!is.na(unaided))\n\n\nsad2_wide <- sad3 %>%\n  pivot_wider(\n    id_cols = c(real),\n    names_from = rater,\n    values_from = unaided\n  )\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(epiR)\n\nepi.occc(sad2_wide, na.rm = FALSE, pairs = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nOverall CCC           0.7707\nOverall precision     0.8952\nOverall accuracy      0.8609\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(psych)\n\nic = ICC(sad2_wide)\nknitr::kable(ic$results[1:2])\n```\n\n::: {.cell-output-display}\n\n\n|                        |type  |       ICC|\n|:-----------------------|:-----|---------:|\n|Single_raters_absolute  |ICC1  | 0.7718848|\n|Single_random_raters    |ICC2  | 0.7727976|\n|Single_fixed_raters     |ICC3  | 0.8742473|\n|Average_raters_absolute |ICC1k | 0.9899121|\n|Average_random_raters   |ICC2k | 0.9899638|\n|Average_fixed_raters    |ICC3k | 0.9950644|\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(irr)\n\nicc(sad2_wide, \"oneway\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n Single Score Intraclass Correlation\n\n   Model: oneway \n   Type : consistency \n\n   Subjects = 40 \n     Raters = 29 \n     ICC(1) = 0.772\n\n F-Test, H0: r0 = 0 ; H1: r0 > 0 \n F(39,1120) = 99.1 , p = 0 \n\n 95%-Confidence Interval for ICC Population Values:\n  0.691 < ICC < 0.849\n```\n\n\n:::\n:::\n\n\n# Plots\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\nlibrary(tidyr)\n\nsad_long <- sad2 %>%\n  group_by(position, rater) %>%\n  mutate(\n    error_unaided = real - unaided,\n    error_new     = real - new\n  ) %>%\n  ungroup() %>%\n  pivot_longer(\n    cols = starts_with(\"error_\"),\n    names_to = \"SAD_type\",\n    values_to = \"error\"\n  ) %>%\n  mutate(\n    SAD_type = case_when(\n      SAD_type == \"error_unaided\" ~ \"Sem auxílio\",\n      SAD_type == \"error_new\"     ~ \"Com auxílio\"\n    )\n  )\n\nlibrary(ggthemes)\n\ncores_metodo <- c(\n  \"Com auxílio\"    = \"#7FBF7B\",\n  \"Sem auxílio\"    = \"#A6764D\",\n  \"Antigo\" = \"steelblue\")\n\nerror_estimated_ca = sad_long%>% \n  filter(!SAD_type == \"Antigo\") %>% \n  filter(SAD_type == \"Com auxílio\") %>%\n  filter(!real > 86) %>% \n  ggplot(aes(real,error))+\n  geom_point(aes(colour = SAD_type),size = 2)+\n  geom_hline(yintercept = 0, color =\"black\", linetype = \"solid\")+\n  geom_smooth(se = F, method = \"loess\", color = \"tan2\")+\n  xlim(0,100)+\n  #scale_color_colorblind()+\n  scale_colour_manual(values = cores_metodo) +\n  theme_few()+\n  #scale_color_manual()\n  labs(x = \" \",\n       y = \"Erro absoluto\")+\n  theme(legend.position = \"none\",\n        strip.background = element_blank(),\n        strip.text = element_text(size = 14, face = \"bold\"),\n        axis.text.x = element_blank())+\n  facet_wrap(~SAD_type, ncol = 1)\n\nerror_estimated_sa = sad_long%>% \n  filter(!SAD_type == \"Antigo\") %>% \n  filter(SAD_type == \"Sem auxílio\") %>% \n  filter(!real > 86) %>% \n  ggplot(aes(real,error))+\n  geom_point(aes(colour = SAD_type),size = 2)+\n  geom_hline(yintercept = 0, color =\"black\", linetype = \"solid\")+\n  geom_smooth(se = F, method = \"loess\", color = \"tan2\")+\n  xlim(0,100)+\n  #scale_color_colorblind()+\n  scale_colour_manual(values = cores_metodo) +\n  theme_few()+\n  #scale_color_manual()\n  labs(x = \"\",\n       y = \"\")+\n  theme(legend.position = \"none\",\n        strip.background = element_blank(),\n        strip.text = element_text(size = 14, face = \"bold\"),\n        axis.text.x = element_blank())+\n  facet_wrap(~SAD_type, ncol = 1)\n```\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(ggthemes)\nlibrary(scales)\nlibrary(cowplot)\n\nsad_long2 <- sad_long %>%\n  pivot_longer(\n    cols = c(unaided, new),   # colunas que você quer empilhar\n    names_to = \"method\",           # nova coluna que identifica o tipo de estimativa\n    values_to = \"estimated\"        # nova coluna com os valores numéricos\n  ) %>%\n  select(rater, position, real, method, estimated) %>% \n   mutate(\n    method = case_when(\n      method == \"unaided\" ~ \"Sem auxílio\",\n      method == \"new\"     ~ \"Com auxílio\"\n    ))\n\n\ncores_metodo <- c(\n  \"Com auxílio\"    = \"#7FBF7B\",\n  \"Sem auxílio\"    = \"#A6764D\",\n  \"Antigo\" = \"steelblue\")\n\n\n\nCCC  <- 0.91\nvies <- 0.98\nprec <- 0.93\n\n\nlab <- paste0(\n  \"CCC = \", number(CCC, accuracy = 0.01, decimal.mark = \",\"),\n  \"\\nViés = \", number(vies, accuracy = 0.01, decimal.mark = \",\"),\n  \"\\nPrecisão = \", number(prec, accuracy = 0.01, decimal.mark = \",\")\n)\n\nestimated_ca <- sad_long2 %>%\n  filter(method == \"Com auxílio\", !(real > 86)) %>%\n  ggplot(aes(x = real, y = estimated)) +\n  geom_jitter(aes(colour = method), width = 0.4) +\n  scale_x_continuous(\n    limits = c(0, 100),\n    breaks = seq(0, 100, 20),\n    oob = scales::squish,\n    expand = c(0, 0)\n  ) +\n  scale_y_continuous(\n    limits = c(0, 100),\n    breaks = seq(0, 100, 20),\n    oob = scales::squish,\n    expand = c(0, 0)\n  ) +\n  scale_colour_manual(values = cores_metodo) +\n  geom_abline(slope = 1, intercept = 0, color = \"tan2\",\n              linetype = \"solid\", size = 1.4) +\n  facet_wrap(~method, ncol = 1) +\n  theme_few() +\n  labs(x = \"Severidade real (%)\",\n       y = \"Severidade estimada (%)\",\n       title = \"Com escala\") +\n  theme(\n    strip.text = element_blank(),\n    legend.position= \"none\",\n    plot.margin    = margin(10, 10, 10, 10),\n    plot.title = element_text(hjust = 0.5, face = \"bold\")) +\n  annotate(\n    \"text\",\n    x = -Inf, y = Inf,\n    label = lab,\n    hjust = -0.05,   \n    vjust = 1.1,     \n    size = 3.5,\n    fontface = \"bold\",\n    lineheight = 1.05\n  ) +\n  coord_cartesian(clip = \"off\")+\n  coord_fixed()\n\nestimated_ca\n```\n\n::: {.cell-output-display}\n![](about_files/figure-html/unnamed-chunk-24-1.png){width=672}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nCCC  <- 0.83\nvies <- 0.98\nprec <- 0.84\n\nlab <- paste0(\n  \"CCC = \", number(CCC, accuracy = 0.01, decimal.mark = \",\"),\n  \"\\nViés = \", number(vies, accuracy = 0.01, decimal.mark = \",\"),\n  \"\\nPrecisão = \", number(prec, accuracy = 0.01, decimal.mark = \",\")\n)\n\nestimated_sa <- sad_long2 %>%\n  filter(method == \"Sem auxílio\", !(real > 86)) %>%\n  ggplot(aes(x = real, y = estimated)) +\n  geom_jitter(aes(colour = method), width = 0.4) +\n  scale_x_continuous(\n    limits = c(0, 100),\n    breaks = seq(0, 100, 20),\n    oob = scales::squish,\n    expand = c(0, 0)\n  ) +\n  scale_y_continuous(\n    limits = c(0, 100),\n    breaks = seq(0, 100, 20),\n    oob = scales::squish,\n    expand = c(0, 0)\n  ) +\n  scale_colour_manual(values = cores_metodo) +\n  geom_abline(slope = 1, intercept = 0,\n              color = \"tan2\", linetype = \"solid\", size = 1.4) +\n  facet_wrap(~method, ncol = 1) +\n  theme_few() +\n  labs(x = \"\",\n       y = \"Severidade estimada (%)\",\n       title = \"Sem escala\") +\n  theme(\n    strip.text      = element_blank(),\n    axis.text.x =  element_blank(),\n    legend.position = \"none\",\n    plot.margin     = margin(10, 10, 10, 10),\n    plot.title = element_text(hjust = 0.5, face = \"bold\")) +\n  annotate(\n    \"text\",\n    x = -Inf, y = Inf,\n    label = lab,\n    hjust = -0.05, \n    vjust = 1.1,     \n    size = 3.5,\n    fontface = \"bold\",\n    lineheight = 1.05\n  ) +\n  coord_cartesian(clip = \"off\")+\n  coord_fixed()  \n\nestimated_sa\n```\n\n::: {.cell-output-display}\n![](about_files/figure-html/unnamed-chunk-25-1.png){width=672}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(patchwork)\n\n#layout = (error_estimated_ca/estimated_ca)|(error_estimated_sa/estimated_sa)\nlayout = (estimated_sa)/(estimated_ca)\n\n  layout &\n  theme(plot.tag = element_text(face = \"bold\", size = 12))\n```\n\n::: {.cell-output-display}\n![](about_files/figure-html/unnamed-chunk-26-1.png){width=672}\n:::\n\n```{.r .cell-code}\nggsave(\"fig/erro_real_estimado.png\", dpi =600, height = 8, width = 8)\n```\n:::\n\n",
    "supporting": [
      "about_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}